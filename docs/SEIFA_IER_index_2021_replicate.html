

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Py: Socio-Economic Index Construction &#8212; Actuaries&#39; Analytical Cookbook</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script data-website-id="f2934c40-e673-4ab5-9658-4b594221551e" defer="defer" src="https://analytics.umami.is/script.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'docs/SEIFA_IER_index_2021_replicate';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Py: Clustering Credit Card Fraud" href="DAA_M06_CS2.html" />
    <link rel="prev" title="R: Baudry ML Reserving Pt 3" href="MLRWP_R_Baudry_Notebook_3_ApplyMachineLearningReserving_v1.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/actuaries-logo.svg" class="logo__image only-light" alt="Actuaries' Analytical Cookbook - Home"/>
    <script>document.write(`<img src="../_static/actuaries-logo.svg" class="logo__image only-dark" alt="Actuaries' Analytical Cookbook - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction to Python</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="about_py.html">About Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Setting up Your Python Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_by_example.html">An Introductory Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="learn_more.html">Learn More</a></li>
<li class="toctree-l1"><a class="reference internal" href="Useful_Python_packages.html">Useful Python packages for Data Science</a></li>
<li class="toctree-l1"><a class="reference internal" href="Performance_gottagofaster.html">Py: Python for Performance</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction to R</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="about_R.html">About R</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_R.html">Setting Up R</a></li>
<li class="toctree-l1"><a class="reference internal" href="introductory_R.html">Introduction to R</a></li>
<li class="toctree-l1"><a class="reference internal" href="intermediate_R.html">Next Steps With R</a></li>
<li class="toctree-l1"><a class="reference internal" href="top_ten_r_packages.html">Useful Packages</a></li>





<li class="toctree-l1"><a class="reference internal" href="MLRWP_R_DataTable.html">R: data.table for actuaries</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Workflow Management</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="version_control.html">Version control</a></li>
<li class="toctree-l1"><a class="reference internal" href="predict_API_gradio.html">Py: Productionising predictive models as API</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Regression, Classification and Technical Price</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="DAA_M05_CS1.html">Py: Customer Churn Classification</a></li>
<li class="toctree-l1"><a class="reference internal" href="multitasking_risk_pricing.html">Py/R: Multitasking Risk Pricing Using Deep Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="py_shap_values.html">Py: Explainable Models with SHAP</a></li>
<li class="toctree-l1"><a class="reference internal" href="NN_bias_w_ChatGPT.html">Py: Investigating Neural Network Biases with ChatGPT</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Life Insurance</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="LifeRecipeBook.html">R: Life Modelling Recipes</a></li>






<li class="toctree-l1"><a class="reference internal" href="life_stats.html">R: Life Industry Stats in Tableau and R</a></li>




<li class="toctree-l1"><a class="reference internal" href="bayesian-applications.html">R: Bayesian Applications</a></li>




<li class="toctree-l1"><a class="reference internal" href="trees.html">R: Decision Tree Applications</a></li>





</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">General Insurance</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="SQL%20Query%20for%20Triangles.html">SQL: Queries to Create Triangles</a></li>
<li class="toctree-l1"><a class="reference internal" href="MLRWP_R_GLMs.html">R: Reserving with GLMs</a></li>
<li class="toctree-l1"><a class="reference internal" href="MLRWP_R_Lasso.html">R: Reserving with LASSO</a></li>





<li class="toctree-l1"><a class="reference internal" href="MLRWP_R_mlr3.html">R: Machine Learning Triangles</a></li>











<li class="toctree-l1"><a class="reference internal" href="MLRWP_Py_triangles_example.html">Py: Machine Learning Triangles</a></li>










<li class="toctree-l1"><a class="reference internal" href="MLRWP_R_Baudry_Notebook_1_SimulateData_v1.html">R: Baudry ML Reserving Pt 1</a></li>






<li class="toctree-l1"><a class="reference internal" href="MLRWP_R_Baudry_Notebook_2_CreateReservingDatabase_v1.html">R: Baudry ML Reserving Pt 2</a></li>








<li class="toctree-l1"><a class="reference internal" href="MLRWP_R_Baudry_Notebook_3_ApplyMachineLearningReserving_v1.html">R: Baudry ML Reserving Pt 3</a></li>





</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Unsupervised Learning</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Py: Socio-Economic Index Construction</a></li>
<li class="toctree-l1"><a class="reference internal" href="DAA_M06_CS2.html">Py: Clustering Credit Card Fraud</a></li>
<li class="toctree-l1"><a class="reference internal" href="DAA_M06_Ex4.html">Py: K-means clustering of COVID dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="DAA_M06_Ex5.html">Py: Hierarchical clustering on COVID dataset</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Natural Language Processing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="R_case_study_word_cloud.html">R: Word Cloud Case Study</a></li>
<li class="toctree-l1"><a class="reference internal" href="textClassificationEntry.html">Py: Text Classification</a></li>
<li class="toctree-l1"><a class="reference internal" href="DAA_M05_Ex10.html">Py: Decision Tree Classification</a></li>
<li class="toctree-l1"><a class="reference internal" href="DAA_M05_Ex18.html">Py: Neural Net Classification</a></li>
<li class="toctree-l1"><a class="reference internal" href="DAA_M07_CS1.html">Py: Classifying review sentiment</a></li>
<li class="toctree-l1"><a class="reference internal" href="DAA_M07_CS2.html">Py: Customer Sentiment Analysis</a></li>

<li class="toctree-l1"><a class="reference internal" href="py_llm_text_sentiment.html">Py: LLM Unstructured Text Transformation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Business Optimization</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="DAA_2021_S2_Tutorial10_exercise_scipy.html">Py: Linear Programming</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Image Recognition</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="DAA_M05_CS2.html">Py: Image Recognition</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Data Ethics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="automated_decision.html">Automated Decision-Making Systems</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="zbibliography.html">Bibliography</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/ActuariesInstitute/cookbook/blob/main/cookbook/docs/SEIFA_IER_index_2021_replicate.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/ActuariesInstitute/cookbook" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/ActuariesInstitute/cookbook/edit/main/cookbook/docs/SEIFA_IER_index_2021_replicate.ipynb" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/docs/SEIFA_IER_index_2021_replicate.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Py: Socio-Economic Index Construction</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#purpose">Purpose:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#this-jupyter-notebook-is-organised-into-the-following-sections">This Jupyter notebook is organised into the following sections:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#load-packages">1. Load Packages</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#define-functions">2. Define Functions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#import-and-transform-data">3. Import and Transform Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variable-dictionary">Variable dictionary</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#modelling">4. Modelling</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-recap-of-the-dataframe-operations-for-transforming-raw-data-to-principal-components">A recap of the dataframe operations for transforming raw data to principal components</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reconcile-with-abs-publication">5. Reconcile with ABS publication</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="py-socio-economic-index-construction">
<h1>Py: Socio-Economic Index Construction<a class="headerlink" href="#py-socio-economic-index-construction" title="Permalink to this heading">#</a></h1>
<p>This notebook was originally created by Andres Villegas Ramirez for the Data Analytics Applications subject, as <em>Case study 1 - The Socio-Economic Indexes for Areas</em>  in the <em>DAA M06 Unsupervised learning</em> module.</p>
<p>Data Analytics Applications is a Fellowship Applications (Module 3) subject with the Actuaries Institute that aims to teach students how to apply a range of data analytics skills, such as neural networks, natural language processing, unsupervised learning and optimisation techniques, together with their professional judgement, to solve a variety of complex and challenging business problems. The business problems used as examples in this subject are drawn from a wide range of industries.</p>
<p>Find out more about the course <a class="reference external" href="https://www.actuaries.asn.au/education-program/fellowship/subjects-and-syllabus/data-analytics-applications-subject">here</a>.</p>
<section id="purpose">
<h2>Purpose:<a class="headerlink" href="#purpose" title="Permalink to this heading">#</a></h2>
<p>This case study demonstrates the use of principal component analysis (PCA) in the construction of an index to rank the socio-economic status of different geographical areas within a country (in this instance, Australia). Such index can be useful to identify areas that require funding or services, or as input for research into the relationship between socio-economic conditions and other outcomes in different areas.</p>
<p>In Australia, the Australian Bureau of Statistics (ABS) produces four of such indexes, referred to as the Socio-Economic Indexes for Areas (SEIFA). SEIFA ranks areas in Australia based on their relative socio-economic advantage and disadvantage.</p>
<p>This notebook replicates the methodology adopted by the ABS in constructing one of these indexes - <strong>Index of Economic Resources, or IER</strong> by Statistical Area 1 (<a class="reference external" href="https://www.abs.gov.au/ausstats/abs&#64;.nsf/Lookup/by%20Subject/1270.0.55.001~July%202016~Main%20Features~Statistical%20Area%20Level%201%20(SA1)~10013#:~:text=Statistical%20Areas%20Level%201%20(SA1,Standard%20(ASGS)%20Main%20Structure.)"><strong>SA1</strong></a>).</p>
</section>
<section id="this-jupyter-notebook-is-organised-into-the-following-sections">
<h2>This Jupyter notebook is organised into the following sections:<a class="headerlink" href="#this-jupyter-notebook-is-organised-into-the-following-sections" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><strong><span class="xref myst">Section 1:</span></strong> Load required packages</p></li>
<li><p><strong><span class="xref myst">Section 2:</span></strong> Define a function for plotting</p></li>
<li><p><strong><span class="xref myst">Section 3:</span></strong> Import and transform data</p></li>
<li><p><strong><span class="xref myst">Section 4:</span></strong> Apply Principal Component Analysis and calibrate SEIFA score</p></li>
<li><p><strong><span class="xref myst">Section 5:</span></strong> Check against ABS publication</p></li>
</ul>
</section>
<section id="load-packages">
<h2>1. Load Packages<a class="headerlink" href="#load-packages" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import required Python packages</span>

<span class="c1">#Dataframe operations</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span> 

<span class="c1">#PCA</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.decomposition</span><span class="w"> </span><span class="kn">import</span> <span class="n">PCA</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">StandardScaler</span>

<span class="c1">#Plotting</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
</pre></div>
</div>
</div>
</div>
<p><a id='Section_2'></a></p>
</section>
<section id="define-functions">
<h2>2. Define Functions<a class="headerlink" href="#define-functions" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define a function to obtain the explained variances from the PCA features.</span>

<span class="c1">## Good practice to define functions upfront.</span>

<span class="k">def</span><span class="w"> </span><span class="nf">plot_explained_variances</span><span class="p">(</span><span class="n">pca</span><span class="p">):</span>

    <span class="n">exp_var_pca</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">explained_variance_ratio_</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">exp_var_pca</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">exp_var_pca</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">align</span> <span class="o">=</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Individual explained variance&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;dodgerblue&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Explained variance ratio&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Principal component&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="import-and-transform-data">
<h2>3. Import and Transform Data<a class="headerlink" href="#import-and-transform-data" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import data</span>
<span class="c1">## File 1: Standardised socio-economic variables published by the ABS (i.e. input to the PCA model)</span>
<span class="c1">## File 2: IER scores by Statistical Area 1 published by the ABS</span>


<span class="n">infolder</span> <span class="o">=</span> <span class="s1">&#39;https://actuariesinstitute.github.io/cookbook/_static/daa_datasets/&#39;</span>

<span class="n">file1</span> <span class="o">=</span> <span class="s1">&#39;standardised_variables_seifa_2021_cut.csv&#39;</span>
<span class="n">file2</span> <span class="o">=</span> <span class="s1">&#39;IER_2021.csv&#39;</span>

<span class="n">data1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">infolder</span> <span class="o">+</span> <span class="n">file1</span><span class="p">)</span>
<span class="n">data2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">infolder</span> <span class="o">+</span> <span class="n">file2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Inspect data</span>

<span class="c1">## These are numerical features (e.g. % corresponding to a variable, see dictionary below) which are standardised</span>

<span class="n">data1</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>SA1_2021</th>
      <th>INC_LOW</th>
      <th>INC_HIGH</th>
      <th>ATSCHOOL</th>
      <th>ATUNI</th>
      <th>CERTIFICATE</th>
      <th>DEGREE</th>
      <th>DIPLOMA</th>
      <th>NOYR12ORHIGHER</th>
      <th>NOEDU</th>
      <th>...</th>
      <th>HIGHCAR</th>
      <th>NOCAR</th>
      <th>DISABILITYU70</th>
      <th>ENGLISHPOOR</th>
      <th>ONEPARENT</th>
      <th>SEP_DIVORCED</th>
      <th>UNINCORP</th>
      <th>CHILDJOBLESS</th>
      <th>MORTGAGEOVER30</th>
      <th>RENTOVER30</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10102100701</td>
      <td>0.031160</td>
      <td>-0.451226</td>
      <td>-0.307998</td>
      <td>-0.611843</td>
      <td>2.110423</td>
      <td>-0.792820</td>
      <td>1.399224</td>
      <td>0.039552</td>
      <td>-0.494326</td>
      <td>...</td>
      <td>1.124942</td>
      <td>-0.361674</td>
      <td>1.160679</td>
      <td>-0.628432</td>
      <td>-0.087881</td>
      <td>-0.046096</td>
      <td>0.533110</td>
      <td>-0.797863</td>
      <td>0.427678</td>
      <td>-1.208146</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10102100702</td>
      <td>-0.745478</td>
      <td>0.235597</td>
      <td>0.309750</td>
      <td>-0.718416</td>
      <td>0.795239</td>
      <td>-0.138695</td>
      <td>1.122862</td>
      <td>-0.328068</td>
      <td>-0.494326</td>
      <td>...</td>
      <td>2.165534</td>
      <td>-0.737816</td>
      <td>-1.371078</td>
      <td>-0.628432</td>
      <td>-1.513208</td>
      <td>-0.216841</td>
      <td>1.846095</td>
      <td>-0.797863</td>
      <td>0.322564</td>
      <td>-1.208146</td>
    </tr>
    <tr>
      <th>2</th>
      <td>10102100703</td>
      <td>0.207462</td>
      <td>-0.333816</td>
      <td>0.648522</td>
      <td>-0.373289</td>
      <td>0.143017</td>
      <td>0.089753</td>
      <td>-0.024178</td>
      <td>-0.148292</td>
      <td>-0.494326</td>
      <td>...</td>
      <td>-0.474119</td>
      <td>-0.425240</td>
      <td>-1.064640</td>
      <td>-0.628432</td>
      <td>0.078716</td>
      <td>0.963607</td>
      <td>0.486319</td>
      <td>-0.335393</td>
      <td>-0.486090</td>
      <td>-0.029516</td>
    </tr>
    <tr>
      <th>3</th>
      <td>10102100704</td>
      <td>0.383411</td>
      <td>-0.417133</td>
      <td>-1.082034</td>
      <td>-0.887458</td>
      <td>-0.308372</td>
      <td>0.417513</td>
      <td>-0.160872</td>
      <td>0.083635</td>
      <td>0.108973</td>
      <td>...</td>
      <td>-0.407742</td>
      <td>-0.528653</td>
      <td>0.038035</td>
      <td>-0.628432</td>
      <td>0.949299</td>
      <td>1.482164</td>
      <td>0.808398</td>
      <td>0.554274</td>
      <td>-0.156349</td>
      <td>-0.423796</td>
    </tr>
    <tr>
      <th>4</th>
      <td>10102100705</td>
      <td>0.334499</td>
      <td>0.256282</td>
      <td>-1.018268</td>
      <td>-0.396676</td>
      <td>0.235498</td>
      <td>-0.072269</td>
      <td>-0.227208</td>
      <td>0.356362</td>
      <td>-0.494326</td>
      <td>...</td>
      <td>-0.135464</td>
      <td>-0.477578</td>
      <td>0.056221</td>
      <td>-0.628432</td>
      <td>-1.048310</td>
      <td>1.253986</td>
      <td>0.795448</td>
      <td>-0.116016</td>
      <td>-0.297469</td>
      <td>-0.292223</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 45 columns</p>
</div></div></div>
</div>
<section id="variable-dictionary">
<h3>Variable dictionary<a class="headerlink" href="#variable-dictionary" title="Permalink to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Variable name</p></th>
<th class="head"><p>Variable description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>INC_LOW</p></td>
<td><p>Per cent of people living in households with stated annual household equivalised income between <span class="math notranslate nohighlight">\(1 and \)</span>25,999 (approx. 1st and 2nd deciles)</p></td>
</tr>
<tr class="row-odd"><td><p>LOWRENT</p></td>
<td><p>Per cent of occupied private dwellings paying rent less than <span class="math notranslate nohighlight">\(250 per week (excluding \)</span>0 per week)</p></td>
</tr>
<tr class="row-even"><td><p>NOCAR</p></td>
<td><p>Per cent of occupied private dwellings with no cars</p></td>
</tr>
<tr class="row-odd"><td><p>LONE</p></td>
<td><p>Per cent of occupied private dwellings who are lone person occupied private dwellings</p></td>
</tr>
<tr class="row-even"><td><p>ONEPARENT</p></td>
<td><p>Per cent of one parent families with dependent offspring only</p></td>
</tr>
<tr class="row-odd"><td><p>OVERCROWD</p></td>
<td><p>Per cent of occupied private dwellings requiring one or more extra bedrooms (based on Canadian National Occupancy Standard)</p></td>
</tr>
<tr class="row-even"><td><p>UNEMPLOYED_IER</p></td>
<td><p>Per cent of people aged 15 years and over who are unemployed</p></td>
</tr>
<tr class="row-odd"><td><p>GROUP</p></td>
<td><p>Per cent of occupied private dwellings who are group occupied private dwellings</p></td>
</tr>
<tr class="row-even"><td><p>OWNING</p></td>
<td><p>Per cent of occupied private dwellings owning dwelling without a mortgage</p></td>
</tr>
<tr class="row-odd"><td><p>UNINCORP</p></td>
<td><p>Per cent of dwellings with at least one person who is an owner of an unincorporated enterprise</p></td>
</tr>
<tr class="row-even"><td><p>INC_HIGH</p></td>
<td><p>Per cent of people with stated annual household equivalised income greater than $91,000</p></td>
</tr>
<tr class="row-odd"><td><p>HIGHMORTGAGE</p></td>
<td><p>Per cent of occupied private dwellings paying mortgage greater than $2,800 per month</p></td>
</tr>
<tr class="row-even"><td><p>MORTGAGE</p></td>
<td><p>Per cent of occupied private dwellings owning dwelling (with a mortgage)</p></td>
</tr>
<tr class="row-odd"><td><p>HIGHBED</p></td>
<td><p>Per cent of occupied private dwellings with four or more bedrooms</p></td>
</tr>
</tbody>
</table>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Inspect data</span>

<span class="c1">## IER scored published based on 2021 Census data collection</span>

<span class="n">data2</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>SA1_2021</th>
      <th>IER_2021</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10102100701</td>
      <td>1023.037282</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10102100702</td>
      <td>1088.576036</td>
    </tr>
    <tr>
      <th>2</th>
      <td>10102100703</td>
      <td>986.1022032</td>
    </tr>
    <tr>
      <th>3</th>
      <td>10102100704</td>
      <td>965.4964701</td>
    </tr>
    <tr>
      <th>4</th>
      <td>10102100705</td>
      <td>1013.432808</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select variables ABS uses to calibrate the IER (per their methodology)</span>

<span class="n">variable_IER</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;SA1_2021&#39;</span><span class="p">,</span>
    <span class="s1">&#39;INC_LOW&#39;</span><span class="p">,</span>
    <span class="s1">&#39;LOWRENT&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NOCAR&#39;</span><span class="p">,</span>
    <span class="s1">&#39;LONE&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ONEPARENT&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OVERCROWD&#39;</span><span class="p">,</span>
    <span class="s1">&#39;UNEMPLOYED_IER&#39;</span><span class="p">,</span>
    <span class="s1">&#39;GROUP&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OWNING&#39;</span><span class="p">,</span>
    <span class="s1">&#39;UNINCORP&#39;</span><span class="p">,</span>
    <span class="s1">&#39;INC_HIGH&#39;</span><span class="p">,</span>
    <span class="s1">&#39;HIGHMORTGAGE&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MORTGAGE&#39;</span><span class="p">,</span>
    <span class="s1">&#39;HIGHBED&#39;</span>

<span class="p">]</span>

<span class="n">data1_IER</span> <span class="o">=</span> <span class="n">data1</span><span class="p">[</span><span class="n">variable_IER</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Inspect data type for these variables</span>

<span class="n">data1_IER</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 59430 entries, 0 to 59429
Data columns (total 15 columns):
 #   Column          Non-Null Count  Dtype  
---  ------          --------------  -----  
 0   SA1_2021        59430 non-null  int64  
 1   INC_LOW         59427 non-null  float64
 2   LOWRENT         59400 non-null  float64
 3   NOCAR           59422 non-null  float64
 4   LONE            59430 non-null  float64
 5   ONEPARENT       59319 non-null  float64
 6   OVERCROWD       59417 non-null  float64
 7   UNEMPLOYED_IER  59429 non-null  float64
 8   GROUP           59430 non-null  float64
 9   OWNING          59423 non-null  float64
 10  UNINCORP        59430 non-null  float64
 11  INC_HIGH        59427 non-null  float64
 12  HIGHMORTGAGE    59400 non-null  float64
 13  MORTGAGE        59423 non-null  float64
 14  HIGHBED         59422 non-null  float64
dtypes: float64(14), int64(1)
memory usage: 6.8 MB
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Remove rows with missing values</span>

<span class="nb">print</span><span class="p">(</span><span class="n">data1_IER</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
<span class="n">data1_IER_dropna</span> <span class="o">=</span> <span class="n">data1_IER</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SA1_2021            0
INC_LOW             3
LOWRENT            30
NOCAR               8
LONE                0
ONEPARENT         111
OVERCROWD          13
UNEMPLOYED_IER      1
GROUP               0
OWNING              7
UNINCORP            0
INC_HIGH            3
HIGHMORTGAGE       30
MORTGAGE            7
HIGHBED             8
dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Standardise data for PCA</span>

<span class="c1">## Select data from column 2 onwards (inclusive). First column is SA1 ID.</span>
<span class="n">pca_data</span> <span class="o">=</span> <span class="n">data1_IER_dropna</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span>

<span class="c1">## Standardise these columns to mean 0 and variance 1</span>
<span class="n">sc</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>
<span class="n">sc</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">pca_data</span><span class="p">)</span>
<span class="n">pca_data</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">pca_data</span><span class="p">)</span>

<span class="c1">## Inspect outputs, each row represents a SA1 </span>

<span class="nb">print</span><span class="p">(</span><span class="n">data1_IER_dropna</span><span class="p">[</span><span class="mi">50</span><span class="p">:</span><span class="mi">55</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pca_data</span><span class="p">[</span><span class="mi">50</span><span class="p">:</span><span class="mi">55</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>       SA1_2021   INC_LOW   LOWRENT     NOCAR      LONE  ONEPARENT  OVERCROWD  \
50  10102100921 -0.694978 -0.149470  0.026395  2.161618   0.016894   0.614584   
51  10102100923 -0.399570 -0.230663 -0.392438  0.346039   0.479932  -0.327006   
53  10102100925 -1.184584 -0.369694 -0.584525  1.995606   1.010923   0.163947   
54  10102100926 -0.755434  0.636737  0.194704  1.770099  -0.418760   0.828480   
55  10102100927 -0.534872 -0.113768 -0.443336 -0.248692  -0.929502   0.042116   

    UNEMPLOYED_IER     GROUP    OWNING  UNINCORP  INC_HIGH  HIGHMORTGAGE  \
50       -0.768433 -0.298797 -1.379936 -1.409706  0.565708     -0.711816   
51       -0.502225 -0.435782 -0.068099 -1.078581  0.417556     -0.309550   
53        0.393123  0.492720 -1.552475 -0.869567  0.401089     -0.914661   
54        0.562322  1.018832 -1.283807 -0.853606 -0.501616     -0.914661   
55       -0.591322  0.001803 -0.652794 -0.622710  0.248079      0.145029   

    MORTGAGE   HIGHBED  
50 -0.075949 -1.407022  
51  0.780225  0.198026  
53 -0.382142 -1.473097  
54 -1.468772 -1.443632  
55  0.547895  0.465557  
[[-6.97384349e-01 -1.49102654e-01  2.73842498e-02  2.18456511e+00
   1.68271418e-02  6.21443888e-01 -7.82538918e-01 -3.01193486e-01
  -1.38687638e+00 -1.42934823e+00  5.65712045e-01 -7.14208804e-01
  -8.01255787e-02 -1.41014150e+00]
 [-4.00578528e-01 -2.30600290e-01 -3.93807726e-01  3.52373086e-01
   4.80225191e-01 -3.29406608e-01 -5.11392783e-01 -4.39108873e-01
  -7.01834243e-02 -1.09373813e+00  4.17385805e-01 -3.11130864e-01
   7.79986710e-01  1.96337876e-01]
 [-1.18930828e+00 -3.70152778e-01 -5.86976088e-01  2.01703428e+00
   1.01162817e+00  1.66375413e-01  4.00564091e-01  4.95697733e-01
  -1.56005434e+00 -8.81893199e-01  4.00899556e-01 -9.17462999e-01
  -3.87727179e-01 -1.47627516e+00]
 [-7.58127412e-01  6.40055426e-01  1.96640397e-01  1.78946385e+00
  -4.19164718e-01  8.37443911e-01  5.72902051e-01  1.02538267e+00
  -1.29039226e+00 -8.65715951e-01 -5.02866086e-01 -9.17462999e-01
  -1.47935650e+00 -1.44678433e+00]
 [-5.36520854e-01 -1.13266264e-01 -4.44992083e-01 -2.47800227e-01
  -9.30303140e-01  4.33461879e-02 -6.02142493e-01  1.44766450e-03
  -6.57042865e-01 -6.31693191e-01  2.47710087e-01  1.44364950e-01
   5.46588117e-01  4.64107182e-01]]
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="modelling">
<h2>4. Modelling<a class="headerlink" href="#modelling" title="Permalink to this heading">#</a></h2>
<p>This section performs the PCA to recreate the ABS’s IER Index.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Initiate the PCA.</span>
<span class="n">pca</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">()</span>

<span class="c1"># Fit the PCA model to determine the transformed features.</span>
<span class="c1">## It took 2 lines to fit the PCA model.</span>
<span class="n">pca</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">pca_data</span><span class="p">)</span>

<span class="c1"># Plot variance explained by principal components</span>
<span class="n">plot_explained_variances</span><span class="p">(</span><span class="n">pca</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/e6025e84a8357cb4ffe1b0a87021118b9371a0481477a306eac1c0efd49af5da.png" src="../_images/e6025e84a8357cb4ffe1b0a87021118b9371a0481477a306eac1c0efd49af5da.png" />
</div>
</div>
<p>Principal component 1 (PC1) explains over 30% of the variance in the data. PC1 is used as the basis of calculating the IER.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pca_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 3.21902216e-02, -1.95351071e-01, -3.62869762e-01,  3.59364682e-01,
       -8.80285299e-02,  1.99924572e-01, -6.52078395e-01, -9.12914962e-01,
        1.26794033e+00,  5.39782081e-01, -4.52416487e-01, -3.17209382e-01,
        2.45495526e-01,  4.39423025e-04])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Reverse sign (per ABS methodology)</span>

<span class="n">pca_data_transformed</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="n">pca</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">pca_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract first principal component in a dataframe</span>
<span class="n">pca1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pca_data_transformed</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;IER_2021&#39;</span><span class="p">])</span>

<span class="c1"># Attach SA1 ID to</span>
<span class="n">IER_S1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">data1_IER_dropna</span><span class="p">[</span><span class="s1">&#39;SA1_2021&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span> <span class="o">=</span> <span class="kc">True</span><span class="p">),</span> <span class="n">pca1</span><span class="p">]</span>
                    <span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">IER_S1</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>      SA1_2021  IER_2021
0  10102100701  0.517295
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calculation from first principal</span>
<span class="c1">## Sign implies how each variable contributes to a score</span>
<span class="c1">## Reverse sign to make it more comprehensive</span>

<span class="n">component_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;Variable&#39;</span><span class="p">:</span> <span class="n">data1_IER</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
    <span class="s1">&#39;PC1 Loading&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">1.0</span> <span class="o">*</span> <span class="n">pca</span><span class="o">.</span><span class="n">components_</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="s1">&#39;First SA1&#39;</span><span class="p">:</span> <span class="n">pca_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="p">})</span>

<span class="nb">print</span><span class="p">(</span><span class="n">component_df</span><span class="p">)</span>


<span class="n">raw_score_first_SA1</span> <span class="o">=</span> <span class="p">(</span><span class="n">component_df</span><span class="p">[</span><span class="s1">&#39;PC1 Loading&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">component_df</span><span class="p">[</span><span class="s1">&#39;First SA1&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>


<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">raw_score_first_SA1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>          Variable  PC1 Loading  First SA1
0          INC_LOW    -0.327920   0.032190
1          LOWRENT    -0.320014  -0.195351
2            NOCAR    -0.316516  -0.362870
3             LONE    -0.307799   0.359365
4        ONEPARENT    -0.243785  -0.088029
5        OVERCROWD    -0.231555   0.199925
6   UNEMPLOYED_IER    -0.217694  -0.652078
7            GROUP    -0.175738  -0.912915
8           OWNING     0.152087   1.267940
9         UNINCORP     0.211586   0.539782
10        INC_HIGH     0.233597  -0.452416
11    HIGHMORTGAGE     0.285636  -0.317209
12        MORTGAGE     0.295868   0.245496
13         HIGHBED     0.334995   0.000439




0.5172947202278048
</pre></div>
</div>
</div>
</div>
<section id="a-recap-of-the-dataframe-operations-for-transforming-raw-data-to-principal-components">
<h3>A recap of the dataframe operations for transforming raw data to principal components<a class="headerlink" href="#a-recap-of-the-dataframe-operations-for-transforming-raw-data-to-principal-components" title="Permalink to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Dataframe name</p></th>
<th class="head"><p>Operations</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>data1</p></td>
<td><p>Raw data we’ll be using to replicate the SEIFA IER score, numercial features (%)</p></td>
</tr>
<tr class="row-odd"><td><p>data1_IER</p></td>
<td><p>Select features for determining IER from data1</p></td>
</tr>
<tr class="row-even"><td><p>data1_IER_dropna</p></td>
<td><p>Remove missing values in data1_IER</p></td>
</tr>
<tr class="row-odd"><td><p>pca_data</p></td>
<td><p>Standardise features in data1_IER_dropna to mean 0 and s.d. 1, used to perform PCA</p></td>
</tr>
<tr class="row-even"><td><p>pca</p></td>
<td><p>Output of PCA, Principal Components</p></td>
</tr>
<tr class="row-odd"><td><p>pca_data_transformed</p></td>
<td><p>Reverse sign in pca</p></td>
</tr>
<tr class="row-even"><td><p>pca1</p></td>
<td><p>Extract first principal component from pca_data_transformed</p></td>
</tr>
<tr class="row-odd"><td><p>IER_S1</p></td>
<td><p>Attach SA1 identifier to pca1, compared to dataframe ABS_IER_S1 which is the published data</p></td>
</tr>
</tbody>
</table>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Standardise calibrated IER scores to mean of 1,000 and standard deviation of 100 (per ABS methodology)</span>

<span class="n">IER_S1</span><span class="p">[</span><span class="s1">&#39;IER_recreated&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">IER_S1</span><span class="p">[</span><span class="s1">&#39;IER_2021&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">IER_S1</span><span class="p">[</span><span class="s1">&#39;IER_2021&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">())</span><span class="o">*</span><span class="mi">100</span><span class="o">+</span><span class="mi">1000</span>

<span class="nb">print</span><span class="p">(</span><span class="n">IER_S1</span><span class="o">.</span><span class="n">tail</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>          SA1_2021  IER_2021  IER_recreated
59298  90104100401  0.022187    1000.995399
59299  90104100402 -0.055935     997.490510
59300  90104100403 -0.785740     964.748521
59301  90104100404 -1.702813     923.604956
59302  90104100407 -0.116936     994.753789
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="reconcile-with-abs-publication">
<h2>5. Reconcile with ABS publication<a class="headerlink" href="#reconcile-with-abs-publication" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract first two columns in the desired data type</span>

<span class="n">ABS_IER_S1</span> <span class="o">=</span> <span class="n">data2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>

<span class="n">ABS_IER_S1</span><span class="p">[</span><span class="s1">&#39;IER_2021&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">ABS_IER_S1</span><span class="p">[</span><span class="s1">&#39;IER_2021&#39;</span><span class="p">],</span>
                                        <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
<span class="n">ABS_IER_S1</span><span class="p">[</span><span class="s1">&#39;SA1_2021&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">ABS_IER_S1</span><span class="p">[</span><span class="s1">&#39;SA1_2021&#39;</span><span class="p">],</span>
                                        <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">,</span> <span class="n">downcast</span> <span class="o">=</span> <span class="s1">&#39;integer&#39;</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">ABS_IER_S1</span><span class="o">.</span><span class="n">info</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ABS_IER_S1</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ABS_IER_S1</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 59421 entries, 0 to 59420
Data columns (total 2 columns):
 #   Column    Non-Null Count  Dtype  
---  ------    --------------  -----  
 0   SA1_2021  59421 non-null  int64  
 1   IER_2021  59303 non-null  float64
dtypes: float64(1), int64(1)
memory usage: 928.6 KB
None


      SA1_2021     IER_2021
0  10102100701  1023.037282
1  10102100702  1088.576036
2  10102100703   986.102203
3  10102100704   965.496470
4  10102100705  1013.432808


SA1_2021      0
IER_2021    118
dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Remove rows with missing value</span>

<span class="nb">print</span><span class="p">(</span><span class="n">ABS_IER_S1</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
<span class="n">ABS_IER_S1_dropna</span> <span class="o">=</span> <span class="n">ABS_IER_S1</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data1_IER_dropna</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ABS_IER_S1_dropna</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SA1_2021      0
IER_2021    118
dtype: int64
59303
59303
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Merge the recreated with the published data for reconciliation 1 - histograms</span>

<span class="n">join</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">ABS_IER_S1_dropna</span><span class="p">,</span> <span class="n">data1_IER_dropna</span><span class="p">,</span> <span class="n">how</span> <span class="o">=</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">on</span> <span class="o">=</span> <span class="s1">&#39;SA1_2021&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot histogram of calibrated IER scores</span>

<span class="n">IER_S1</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">&#39;IER_recreated&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;dodgerblue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of recreated IER scores&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;IER score&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/87d76f86212740a37aa7d4bf995b827403fe4aba26f23579f38f6991c78449d9.png" src="../_images/87d76f86212740a37aa7d4bf995b827403fe4aba26f23579f38f6991c78449d9.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot histogram of publisehd IER scores</span>

<span class="n">ABS_IER_S1_dropna</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">&#39;IER_2021&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;dodgerblue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of ABS IER scores&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;IER score&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">ABS_IER_S1_dropna</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;check_ABS_IER_S1_dropna.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/a1b60af8dbf9d5b93def174e8824bc7fefbd7d78c4795e91228033f5f526ff1e.png" src="../_images/a1b60af8dbf9d5b93def174e8824bc7fefbd7d78c4795e91228033f5f526ff1e.png" />
</div>
</div>
<p>The two histograms are very similar in shape!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract columns we need</span>

<span class="n">IER_S1_reduce</span> <span class="o">=</span> <span class="n">IER_S1</span><span class="p">[[</span><span class="s1">&#39;SA1_2021&#39;</span><span class="p">,</span> <span class="s1">&#39;IER_recreated&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Merge the recreated with the published data for reconciliation 2 - scatter plot</span>

<span class="n">IER_join</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">ABS_IER_S1_dropna</span><span class="p">,</span> <span class="n">IER_S1_reduce</span><span class="p">,</span> <span class="n">how</span> <span class="o">=</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">on</span> <span class="o">=</span> <span class="s1">&#39;SA1_2021&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">IER_join</span><span class="o">.</span><span class="n">tail</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>          SA1_2021     IER_2021  IER_recreated
59298  90104100401  1000.369129    1000.995399
59299  90104100402   996.979765     997.490510
59300  90104100403   964.139169     964.748521
59301  90104100404   923.050144     923.604956
59302  90104100407   994.377312     994.753789
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot calibrated score vs. published score</span>

<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="s1">&#39;IER_recreated&#39;</span><span class="p">,</span> <span class="s1">&#39;IER_2021&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">IER_join</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;dodgerblue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Comparison of recreated and ABS IER scores&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Recreated IER score&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;ABS IER score&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/4d6c55a11d11247cc67e81d496336ee856fa78d9a9a1405b347fb5d82531fe60.png" src="../_images/4d6c55a11d11247cc67e81d496336ee856fa78d9a9a1405b347fb5d82531fe60.png" />
</div>
</div>
<p>The above scatter plot shows that the two sets of indexes are very closely aligned.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "ActuariesInstitute/cookbook",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./docs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="MLRWP_R_Baudry_Notebook_3_ApplyMachineLearningReserving_v1.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">R: Baudry ML Reserving Pt 3</p>
      </div>
    </a>
    <a class="right-next"
       href="DAA_M06_CS2.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Py: Clustering Credit Card Fraud</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#purpose">Purpose:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#this-jupyter-notebook-is-organised-into-the-following-sections">This Jupyter notebook is organised into the following sections:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#load-packages">1. Load Packages</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#define-functions">2. Define Functions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#import-and-transform-data">3. Import and Transform Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variable-dictionary">Variable dictionary</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#modelling">4. Modelling</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-recap-of-the-dataframe-operations-for-transforming-raw-data-to-principal-components">A recap of the dataframe operations for transforming raw data to principal components</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reconcile-with-abs-publication">5. Reconcile with ABS publication</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By YDAWG, DAPC, YAC and other contributors.
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
   The Actuaries' Analytical Cookbook is a series of data and analytics recipes to help actuaries quickly get started with a new project.   This site is intended to be a resource to actuaries in both data science and traditional fields.  Opinions expressed in this publication are the opinions of contributors and do not necessarily represent those of either the Institute of Actuaries of Australia (the ‘Institute’), its members, directors, officers, employees, agents, or that of the employers of the contributors. <br>© Institute of Actuaries of Australia and Contributors 2021. All rights reserved.
</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>